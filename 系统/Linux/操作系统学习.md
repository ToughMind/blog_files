---
title: "操作系统学习"
date: 2020-01-17T11:51:28+08:00
description: ""
lastmod: 2018-07-10T00:00:00+08:00
draft: false
tags: ["linux"]
categories: ["linux"]

weight: 1
contentCopyright: MIT
mathjax: true
autoCollapseToc: true
---
### 1、缓存 I/O
- 缓存I/O又被称作标准I/O
- Linux缓存机制中，会将IO数据缓存在文件系统的页缓存
- 对于写操作，数据先写到页缓存中去
  - 同步写，应用程序会等待数据写完
  - 延迟写，操作系统会定期将缓存数据刷新到磁盘中。
    - 不会通知应用程序
  - 异步写，数据完全写到磁盘后会返回给应用程序的
    
### 2.1、用户空间和内核空间
- 现在操作系统都是采用虚拟存储器，对32位操作系统而言，它的寻址空间（虚拟存储空间）为4G（2的32次方）
- 操作系统的核心是内核，独立于普通的应用程序，可以访问受保护的内存空间，也有访问底层硬件设备的所有权限
- 对于linux，最高1G字节供内核使用；较低3G字节供用户进程使用。

### 2.2、进程切换
- 为了控制进程的执行，内核必须有能力挂起正在CPU上运行的进程，并恢复以前挂起的某个进程的执行
  - 保存处理机上下文，包括程序计数器和其他寄存器
  - 相应的队列，如就绪、在某事件阻塞等队列

### 2.3、进程阻塞
- 请求系统资源失败、等待某种操作的完成、新数据尚未到达
- 操作原语：Block
- 当进程进入阻塞状态，是不占用CPU资源的

### 2.4、文件描述符fd
- 一个索引值，指向内核为每一个进程所维护的该进程打开文件的记录表

### 3.1、调度算法
- 先来先服务（FCFS, First Come First Serve）
- 短作业优先（SJF，Shortest Job First）
- 最高优先权调度（Priority Scheduling）
- 时间片轮转（RR, Round Robin）

### 3.2、死锁
- 原因
  - 竞争资源
  - 程序推进顺序不当
- 必要条件
  - 互斥条件
  - 请求和保持条件
  - 不剥夺条件
  - 环路等待条件
- 处理死锁基本方法
  - 预防死锁
  - 避免死锁(银行家算法)
  - 检测死锁(资源分配图)
  - 解除死锁
    - 剥夺资源
    - 撤销进程
### 3.3、程序编译与链接
- 4个步骤:预处理(Prepressing), 编译(Compilation)、汇编(Assembly)、链接(Linking)
- 预编译过程主要处理那些源文件中的以“#”开始的预编译指令
- 编译过程就是把预处理完的文件进行一系列的词法分析、语法分析、语义分析及优化后生成相应的汇编代码文件
- 汇编器是将汇编代码转化成机器可以执行的指令
- 链接的主要内容就是把各个模块之间相互引用的部分处理好

### 3.4、分页和分段
- 分页：用户程序的地址空间被划分成若干固定大小的区域，称为“页”，相应地，内存空间分成若干个物理块，页和块的大小相等
- 分段：将用户程序地址空间分成若干个大小不等的段，每段可以定义一组相对完整的逻辑信息
- 分页和分段的区别：
  - 页是信息的物理单位,分页是为了实现非连续分配,以便解决内存碎片问题,或者说分页是由于系统管理的需要.段是信息的逻辑单位,它含有一组意义相对完整的信息,分段的目的是为了更好地实现共享,满足用户的需要.
  - 页的大小固定,由系统确定,将逻辑地址划分为页号和页内地址是由机器硬件实现的.而段的长度却不固定,决定于用户所编写的程序,通常由编译程序在对源程序进行编译时根据信息的性质来划分.
  - 分页的作业地址空间是一维的.分段的地址空间是二维的.
  
### 3.5、边沿触发和水平触发
边缘触发是指每当状态变化时发生一个 io 事件，条件触发是只要满足条件就发生一个 io 事件